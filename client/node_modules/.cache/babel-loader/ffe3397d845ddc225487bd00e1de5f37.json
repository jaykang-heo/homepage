{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar iterall_1 = require(\"iterall\");\n\nexports.withFilter = function (asyncIteratorFn, filterFn) {\n  return function (rootValue, args, context, info) {\n    var _a;\n\n    var asyncIterator = asyncIteratorFn(rootValue, args, context, info);\n\n    var getNextPromise = function () {\n      return asyncIterator.next().then(function (payload) {\n        if (payload.done === true) {\n          return payload;\n        }\n\n        return Promise.resolve(filterFn(payload.value, args, context, info)).catch(function () {\n          return false;\n        }).then(function (filterResult) {\n          if (filterResult === true) {\n            return payload;\n          }\n\n          return getNextPromise();\n        });\n      });\n    };\n\n    return _a = {\n      next: function () {\n        return getNextPromise();\n      },\n      return: function () {\n        return asyncIterator.return();\n      },\n      throw: function (error) {\n        return asyncIterator.throw(error);\n      }\n    }, _a[iterall_1.$$asyncIterator] = function () {\n      return this;\n    }, _a;\n  };\n};","map":{"version":3,"sources":["../src/with-filter.ts"],"names":[],"mappings":";;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAKa,OAAA,CAAA,UAAA,GAAa,UAAC,eAAD,EAA8B,QAA9B,EAAgD;AACxE,SAAO,UAAC,SAAD,EAAiB,IAAjB,EAA4B,OAA5B,EAA0C,IAA1C,EAAmD;;;AACxD,QAAM,aAAa,GAAG,eAAe,CAAC,SAAD,EAAY,IAAZ,EAAkB,OAAlB,EAA2B,IAA3B,CAArC;;AAEA,QAAM,cAAc,GAAG,YAAA;AACrB,aAAO,aAAa,CACjB,IADI,GAEJ,IAFI,CAEC,UAAA,OAAA,EAAO;AACX,YAAI,OAAO,CAAC,IAAR,KAAiB,IAArB,EAA2B;AACzB,iBAAO,OAAP;AACD;;AAED,eAAO,OAAO,CAAC,OAAR,CAAgB,QAAQ,CAAC,OAAO,CAAC,KAAT,EAAgB,IAAhB,EAAsB,OAAtB,EAA+B,IAA/B,CAAxB,EACJ,KADI,CACE,YAAA;AAAM,iBAAA,KAAA;AAAK,SADb,EAEJ,IAFI,CAEC,UAAA,YAAA,EAAY;AAChB,cAAI,YAAY,KAAK,IAArB,EAA2B;AACzB,mBAAO,OAAP;AACD;;AAGD,iBAAO,cAAc,EAArB;AACD,SATI,CAAP;AAUD,OAjBI,CAAP;AAkBD,KAnBD;;AAqBA,WAAA,EAAA,GAAA;AACE,MAAA,IAAI,EAAA,YAAA;AACF,eAAO,cAAc,EAArB;AACD,OAHH;AAIE,MAAA,MAAM,EAAA,YAAA;AACJ,eAAO,aAAa,CAAC,MAAd,EAAP;AACD,OANH;AAOE,MAAA,KAAK,EAAA,UAAC,KAAD,EAAM;AACT,eAAO,aAAa,CAAC,KAAd,CAAoB,KAApB,CAAP;AACD;AATH,KAAA,EAUE,EAAA,CAAC,SAAA,CAAA,eAAD,CAAA,GAAA,YAAA;AACE,aAAO,IAAP;AACD,KAZH,EAaE,EAbF;AAcD,GAtCD;AAuCD,CAxCY","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterall_1 = require(\"iterall\");\nexports.withFilter = function (asyncIteratorFn, filterFn) {\n    return function (rootValue, args, context, info) {\n        var _a;\n        var asyncIterator = asyncIteratorFn(rootValue, args, context, info);\n        var getNextPromise = function () {\n            return asyncIterator\n                .next()\n                .then(function (payload) {\n                if (payload.done === true) {\n                    return payload;\n                }\n                return Promise.resolve(filterFn(payload.value, args, context, info))\n                    .catch(function () { return false; })\n                    .then(function (filterResult) {\n                    if (filterResult === true) {\n                        return payload;\n                    }\n                    return getNextPromise();\n                });\n            });\n        };\n        return _a = {\n                next: function () {\n                    return getNextPromise();\n                },\n                return: function () {\n                    return asyncIterator.return();\n                },\n                throw: function (error) {\n                    return asyncIterator.throw(error);\n                }\n            },\n            _a[iterall_1.$$asyncIterator] = function () {\n                return this;\n            },\n            _a;\n    };\n};\n//# sourceMappingURL=with-filter.js.map"]},"metadata":{},"sourceType":"script"}